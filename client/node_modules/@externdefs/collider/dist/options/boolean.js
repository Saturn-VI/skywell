import { Option, rerouteArguments } from './base.js';
export function Boolean(descriptor, initialValueBase, optsBase) {
    const [initialValue, opts] = rerouteArguments(initialValueBase, optsBase ?? {});
    return new BooleanOption(descriptor, initialValue, opts);
}
export class BooleanOption extends Option {
    description;
    required;
    hidden;
    descriptor;
    initialValue;
    constructor(descriptor, initialValue, options) {
        super();
        this.description = options.description;
        this.required = options.required ?? false;
        this.hidden = options.hidden ?? false;
        this.descriptor = descriptor;
        this.initialValue = initialValue;
    }
    define(builder, _key) {
        builder.addOption({
            names: this.descriptor,
            allowBinding: false,
            arity: 0,
            description: this.description,
            required: this.required,
            hidden: this.hidden,
        });
    }
    transform(_builder, _key, state) {
        const set = new Set(this.descriptor);
        let currentValue = this.initialValue;
        for (const { name, value } of state.options) {
            if (!set.has(name)) {
                continue;
            }
            currentValue = value;
        }
        return currentValue;
    }
}
//# sourceMappingURL=boolean.js.map